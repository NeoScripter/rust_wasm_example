<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rust and JavaScript Example</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <script type="module">
        import init, { exclude_lines, separate_lines } from './pkg/rust_wasm_example.js';
        async function run() {
            await init();
            document.getElementById('excludeLinesBtn').addEventListener('click', () => {
                let usersText = document.getElementById('userMessage').value;
                const wordToExclude = document.getElementById('exludedWord').value;
                usersText = exclude_lines(usersText, wordToExclude);
                document.getElementById('outputText1').value = usersText; 
            });

            document.getElementById('separateLinesBtn').addEventListener('click', () => {
                let initialText = document.getElementById('textToBreak').value;
                const wordToExclude = document.getElementById('separator').value;
                initialText = separate_lines(initialText, wordToExclude);
                document.getElementById('outputText2').value = initialText; 
            });
        }
        window.onload = run;
    </script>
</head>
<body>
    <div class="selection-wrapper">
        <select name="mySelect" id="selection">
            <option value='sorter-wrapper'>Line sorter</option>
            <option value='separator-wrapper'>Line separator</option>
        </select>
    </div>
    <div class="wrapper">
        <div class="sorter-wrapper subwrapper">
            <label for="userMessage">Your text:</label>
            <textarea id="userMessage" name="userMessage" rows="14" cols="40"></textarea>
            <label for="exludedWord">
                Lines containing the specified word will be excluded
            </label>
            <input type="text" id="exludedWord" name="exludedWord">
            <button id="excludeLinesBtn">Run</button>
            <label for="outputText1">Output</label>
            <textarea id="outputText1" name="outputText1" rows="12" cols="40" readonly></textarea>
        </div>
        <div class="separator-wrapper subwrapper hidden">
            <label for="textToBreak">Your text:</label>
            <textarea id="textToBreak" name="textToBreak" rows="14" cols="40"></textarea>
            <label for="separator">A newline will be inserted after the designated word
            </label>
            <input type="text" id="separator" name="separator">
            <button id="separateLinesBtn">Run</button>
            <label for="outputText2">Output</label>
            <textarea id="outputText2" name="outputText2" rows="12" cols="40" readonly></textarea>
        </div>
    </div>
</body>
</html>
